---
name: wide-research
description: |
  Wide Research å¤šå®ä¾‹å¹¶è¡Œè°ƒç ”ç¼–æ’ç³»ç»Ÿã€‚å½“ç”¨æˆ·æåŠ "Wide Research"ã€"wide research"ã€"å¹¿åŸŸè°ƒç ”"ã€"å¹¶è¡Œç ”ç©¶"ã€"å¤šAgentè°ƒç ”" æ—¶è§¦å‘ã€‚

  æ ¸å¿ƒç‰¹å¾ï¼šåˆ†é˜¶æ®µæ‰§è¡Œã€Phase 0 åå¿…é¡»ç”¨æˆ·ç¡®è®¤ã€Task tool å¹¶è¡Œå¯åŠ¨å­ä»£ç†ã€è§„èŒƒåŒ–å·¥ä½œç›®å½•ã€‚

  é€‚ç”¨äºï¼šç«å“åˆ†æã€å¸‚åœºç ”ç©¶ã€æŠ€æœ¯è°ƒç ”ã€æ–‡çŒ®ç»¼è¿°ç­‰éœ€è¦ç³»ç»Ÿæ€§å¹¶è¡Œå¤„ç†çš„ä»»åŠ¡ã€‚
allowed-tools: Read, Write, Edit, Glob, Grep, Bash, Task, TodoWrite, WebFetch, WebSearch, mcp__tavily-mcp__tavily_search, mcp__tavily-mcp__tavily_extract, mcp__tavily-mcp__tavily_crawl, mcp__tavily-mcp__tavily_map, mcp__firecrawl-mcp__firecrawl_scrape, mcp__firecrawl-mcp__firecrawl_search, mcp__firecrawl-mcp__firecrawl_map
---

# Wide Research å¤šå®ä¾‹ç¼–æ’ç³»ç»Ÿ

## ğŸ”´ æ‰§è¡Œå‰å¼ºåˆ¶æ£€æŸ¥ï¼ˆæ¯æ¬¡æ‰§è¡Œå‰å¿…è¯»ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ æ‰§è¡Œå‰æ£€æŸ¥æ¸…å•ï¼ˆç¼ºä¸€ä¸å¯ï¼‰                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â–¡ 1. Phase 0 æ‘¸åº• â†’ ç­‰å¾…ç”¨æˆ·å›å¤"æ‰§è¡Œ"/"å¼€å§‹" â†’ æ‰èƒ½ç»§ç»­               â”‚
â”‚  â–¡ 2. æ‘¸åº•æŠ¥å‘Šä¸­æ ‡æ³¨ä»»åŠ¡ç±»å‹ï¼šğŸ”å‘ç°å‹ æˆ– ğŸ“¦å¤„ç†å‹                        â”‚
â”‚  â–¡ 3. å·¥ä½œç›®å½•ï¼šruns/YYYYMMDD-<ä»»åŠ¡æ‘˜è¦>-<6ä½hex>/                      â”‚
â”‚  â–¡ 4. ğŸ”å‘ç°å‹ï¼šæ¯ä¸ªå‘ç° â‰¥3 æ¡åŸæ–‡æ‘˜å½•ï¼ˆè¯æ®é“¾ï¼‰                         â”‚
â”‚  â–¡ 5. ğŸ“¦å¤„ç†å‹ï¼šæ•°æ®å®Œæ•´æ€§ â‰¥95%                                         â”‚
â”‚  â–¡ 6. äº¤ä»˜å‰è‡ªå®¡ï¼šæ•°æ®æ¡ç›®æ•° = æ˜¾ç¤ºæ¡ç›®æ•°                                â”‚
â”‚  â–¡ 7. å­ä»£ç†è¾“å‡ºå†™å…¥æ–‡ä»¶ï¼Œåªè¿”å› â‰¤200å­— çŠ¶æ€                             â”‚
â”‚  â–¡ 8. æ¯é˜¶æ®µæ›´æ–° logs/checkpoint.json                                   â”‚
â”‚  â–¡ 9. å­ä»£ç†å¢é‡å†™å…¥ï¼ˆEditè¿½åŠ ï¼Œç¦æ­¢å†…å­˜ç§¯ç´¯ï¼‰                            â”‚
â”‚  â–¡ 10. â‰¥4å­ä»»åŠ¡ä½¿ç”¨ Report-Generator å­ä»£ç†ï¼ˆè§„åˆ™12ï¼‰                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**â›” è·³è¿‡ä»»ä½•ä¸€é¡¹ = æ¡†æ¶æ‰§è¡Œå¤±è´¥**

---

## ğŸ”„ Auto-Compaction æ¢å¤åè®®

**å½“å¯¹è¯è¢«å‹ç¼©åï¼Œç«‹å³æ‰§è¡Œ**ï¼š
```bash
# 1. åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•å¹¶æ‰¾åˆ°æœ€è¿‘çš„å·¥ä½œç›®å½•
cd "$(git rev-parse --show-toplevel)" && \
WORK_DIR=$(ls -td runs/*/ 2>/dev/null | head -1) && \
cat "$WORK_DIR/logs/checkpoint.json" && \
echo "---" && ls "$WORK_DIR/outputs/"
```

**æ ¹æ® checkpoint.json çš„ current_phase ç»§ç»­**ï¼š
- Phase 3 æœªå®Œæˆ â†’ æ£€æŸ¥å“ªäº›å­ä»»åŠ¡ç¼ºå¤±ï¼Œè¡¥å……æ‰§è¡Œ
- Phase 4 æœªå®Œæˆ â†’ å¯åŠ¨ Report-Generator å­ä»£ç†
- Phase 5 æœªå®Œæˆ â†’ æ‰§è¡Œäº¤ä»˜å‰è‡ªå®¡

---

## è§„åˆ™é€ŸæŸ¥è¡¨

| è§„åˆ™ | æ ¸å¿ƒè¦ç‚¹ | è¯¦æƒ… |
|-----|---------|------|
| **è§„åˆ™ 0** | ğŸ”å‘ç°å‹ï¼ˆéœ€æœç´¢ï¼‰vs ğŸ“¦å¤„ç†å‹ï¼ˆå·²çŸ¥æ•°æ®æºï¼‰ | è§ä¸‹æ–¹ |
| **è§„åˆ™ 1** | Phase 0 åå¿…é¡»åœç­‰ç”¨æˆ·ç¡®è®¤ | PHASES.md |
| **è§„åˆ™ 2** | å¿…é¡»ç”¨ Task tool å¹¶è¡Œå¯åŠ¨å­ä»£ç† | PHASES.md |
| **è§„åˆ™ 3** | å·¥ä½œç›®å½•å¿…é¡»åœ¨ `runs/` ä¸‹ | - |
| **è§„åˆ™ 4** | ç¦æ­¢è·³è¿‡ä»»ä½•é˜¶æ®µ | PHASES.md |
| **è§„åˆ™ 5** | å­ä»£ç†é»˜è®¤ haiku æ¨¡å‹ | RULES.md |
| **è§„åˆ™ 6** | ğŸ”å‘ç°å‹ï¼šâ‰¥3æ¡åŸæ–‡/å‘ç° | PROMPTS.md |
| **è§„åˆ™ 7** | å­ä»£ç†è¾“å‡ºå†™æ–‡ä»¶ï¼Œè¿”å›â‰¤200å­— | PROMPTS.md |
| **è§„åˆ™ 8** | äº¤ä»˜å‰è‡ªå®¡ | VERIFICATION.md |
| **è§„åˆ™ 10** | æ¯é˜¶æ®µæ›´æ–° checkpoint.json | è§ä¸‹æ–¹ |
| **è§„åˆ™ 11** | å­ä»£ç†å¢é‡å†™å…¥ | PROMPTS.md |
| **è§„åˆ™ 12** | ğŸ”´ **â‰¥4å­ä»»åŠ¡å¿…é¡»ç”¨ Report-Generatorï¼ˆä¸»Agentç¦æ­¢ç›´æ¥è¯»outputsï¼‰** | PHASE4_AGGREGATION.md |

---

## è§„åˆ™ 0ï¼šä»»åŠ¡ç±»å‹åˆ¤æ–­

```
"æ‰§è¡Œå­ä»»åŠ¡æ—¶ï¼Œæ˜¯å¦éœ€è¦ã€å»æ‰¾ã€‘æ•°æ®æºï¼Ÿ"
â”œâ”€â”€ æ˜¯ â†’ ğŸ” å‘ç°å‹ï¼ˆè¯æ®é“¾ â‰¥3æ¡/å‘ç°ï¼‰
â””â”€â”€ å¦ â†’ ğŸ“¦ å¤„ç†å‹ï¼ˆå®Œæ•´æ€§ â‰¥95%ï¼‰
```

| ç”¨æˆ·è¯·æ±‚ | æ­£ç¡®åˆ¤æ–­ |
|---------|---------|
| "ç»¼è¿° RAG æŠ€æœ¯æœ€æ–°è¿›å±•" | ğŸ” å‘ç°å‹ |
| "è°ƒç ”æˆ‘ä»¬è¿™ 10 ç¯‡å†…éƒ¨æ–‡æ¡£" | ğŸ“¦ å¤„ç†å‹ |

---

## æ‰§è¡Œæµç¨‹æ¦‚è§ˆ

```
Phase 0 (æ‘¸åº•) â†’ ç”¨æˆ·ç¡®è®¤ â†’ Phase 1 (åˆå§‹åŒ–) â†’ Phase 2 (å‡†å¤‡)
â†’ Phase 3 (å¹¶è¡Œæ‰§è¡Œ) â†’ Phase 4 (èšåˆ) â†’ Phase 5 (æ¶¦è‰²äº¤ä»˜)
```

### Phase 0ï¼šæ‘¸åº•ï¼ˆå¿…é¡»ç­‰å¾…ç”¨æˆ·ç¡®è®¤ï¼‰

1. æ‰§è¡Œ 3-5 æ¬¡ tavily_search çœŸå®æ£€ç´¢
2. è¾“å‡ºæ‘¸åº•æŠ¥å‘Šï¼ˆç»´åº¦ã€æ ·æœ¬è¯æ®ã€å­ä»»åŠ¡åˆ—è¡¨ï¼‰
3. **åœä¸‹ç­‰å¾…ç”¨æˆ·å›å¤"æ‰§è¡Œ"/"å¼€å§‹"**

### Phase 1ï¼šåˆå§‹åŒ–ï¼ˆğŸ”´ åŸå­åŒ–æ“ä½œ + å¼ºåˆ¶éªŒè¯ï¼‰

**â›” å·¥ä½œç›®å½•å¿…é¡»åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `runs/`ï¼Œç¦æ­¢åœ¨ `.claude/skills/` ä¸‹åˆ›å»ºï¼**

```bash
# 1. åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼ˆåŒ…å« .git çš„ç›®å½•ï¼‰
PROJECT_ROOT=$(git rev-parse --show-toplevel 2>/dev/null || pwd) && \
cd "$PROJECT_ROOT" && \
# 2. åˆ›å»ºå·¥ä½œç›®å½•
WORK_DIR="runs/$(date +%Y%m%d)-<ä»»åŠ¡æ‘˜è¦>-$(openssl rand -hex 3)" && \
mkdir -p "$WORK_DIR"/{raw,prompts,outputs,logs} && \
cat > "$WORK_DIR/logs/checkpoint.json" << EOF
{
  "current_phase": 1,
  "phase_status": {"phase_0":"completed","phase_1":"in_progress","phase_2":"pending","phase_3":"pending","phase_4":"pending","phase_5":"pending"},
  "subtasks": {},
  "last_update": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
  "recovery_hint": "Phase 1 åˆå§‹åŒ–å®Œæˆ"
}
EOF
cat > "$WORK_DIR/metadata.json" << EOF
{"task": "<ä»»åŠ¡>", "created_at": "$(date -u +%Y-%m-%dT%H:%M:%SZ)", "status": "initialized"}
EOF
echo "âœ… å·²åˆ›å»º: $PROJECT_ROOT/$WORK_DIR" && ls -la "$WORK_DIR/logs/checkpoint.json"
```

**ğŸ”´ æ‰§è¡Œåç«‹å³éªŒè¯ï¼ˆå¿…é¡»çœ‹åˆ° âœ…ï¼‰**ï¼š
```bash
[ -f "$WORK_DIR/logs/checkpoint.json" ] && echo "âœ… checkpoint.json å·²åˆ›å»º" || echo "â›” å¤±è´¥ï¼šé‡æ–°æ‰§è¡Œä¸Šæ–¹åˆå§‹åŒ–å‘½ä»¤"
```

### Phase 2ï¼šå‡†å¤‡ Prompts

**ğŸ”´ é—¨æ§æ£€æŸ¥**ï¼š
```bash
[ ! -f "$WORK_DIR/logs/checkpoint.json" ] && echo "â›” ç¼ºå°‘ checkpoint.json" && exit 1
```

- ä¸ºæ¯ä¸ªå­ä»»åŠ¡ç”Ÿæˆ prompt æ–‡ä»¶åˆ° `prompts/`
- å®¡é˜…åç»§ç»­

### Phase 3ï¼šå¹¶è¡Œæ‰§è¡Œï¼ˆå…³é”®ï¼‰

**ğŸ”´ é—¨æ§æ£€æŸ¥ + æ›´æ–° checkpoint**ï¼š
```bash
[ ! -f "$WORK_DIR/logs/checkpoint.json" ] && echo "â›” ç¼ºå°‘ checkpoint.json" && exit 1
# æ›´æ–° checkpoint ä¸º Phase 3
```

**åœ¨å•æ¡æ¶ˆæ¯ä¸­å¯åŠ¨æ‰€æœ‰å­ä»£ç†**ï¼š
```javascript
Task("å­ä»»åŠ¡1", `...prompt...`, "researcher", { model: "haiku" })
Task("å­ä»»åŠ¡2", `...prompt...`, "researcher", { model: "haiku" })
// ... æ‰€æœ‰å­ä»»åŠ¡å¹¶è¡Œå¯åŠ¨
```

### Phase 4-5ï¼šèšåˆä¸æŠ¥å‘Šï¼ˆğŸ”´ å…³é”®åˆ¤æ–­ï¼‰

**â›” å­ä»»åŠ¡æ•°é‡åˆ¤æ–­ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰**ï¼š
```
å­ä»»åŠ¡æ•°é‡ â‰¥ 4ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ ğŸ”´ å¿…é¡»å¯åŠ¨ Report-Generator å­ä»£ç†
â”‚        â›” ä¸» Agent ç»å¯¹ç¦æ­¢æ‰§è¡Œ Read(outputs/*.md)
â”‚        è¯¦è§ PHASE4_AGGREGATION.md
â””â”€â”€ å¦ â†’ ä¸» Agent å¯ç›´æ¥å¤„ç†
```

**â›” Report-Generator å¤±è´¥å¤„ç†ï¼ˆå¼ºåˆ¶ï¼‰**ï¼š
```
æ£€æŸ¥ 3 æ–‡ä»¶æ˜¯å¦åœ¨ $WORK_DIR/ æ ¹ç›®å½•ï¼š
â”œâ”€â”€ å…¨éƒ¨å­˜åœ¨ â†’ ç»§ç»­ Phase 5
â”œâ”€â”€ éƒ¨åˆ†/å…¨éƒ¨ç¼ºå¤± â†’ é‡è¯• Report-Generatorï¼ˆæœ€å¤š 2 æ¬¡ï¼‰
â””â”€â”€ é‡è¯•ä»å¤±è´¥ â†’ æŠ¥å‘Šå¤±è´¥å¹¶åœæ­¢
    â›” ç¦æ­¢ä¸» Agent fallback è¯»å– outputs
```

**å¼ºåˆ¶è¾“å‡º 3 æ–‡ä»¶ï¼ˆå¿…é¡»åœ¨ $WORK_DIR/ æ ¹ç›®å½•ï¼‰**ï¼š
1. `$WORK_DIR/aggregated_raw.md`
2. `$WORK_DIR/final_report.md`
3. `$WORK_DIR/evidence_summary.md`

---

## å­ä»£ç† Prompt æ ¸å¿ƒæ¨¡æ¿

### ğŸ” å‘ç°å‹å­ä»»åŠ¡

```markdown
# å­ä»»åŠ¡: [ä»»åŠ¡å]

## ç›®æ ‡
[å…·ä½“è°ƒç ”ç›®æ ‡]

## æ•°æ®æº
- [URLæˆ–æœç´¢æ–¹å‘]

## çº¦æŸ
- Tavily æ£€ç´¢ä¸è¶…è¿‡ 10 è½®
- å¿…é¡»é˜…è¯»æºä»£ç /å®˜æ–¹æ–‡æ¡£

## è¾“å‡ºæ ¼å¼ã€å¼ºåˆ¶ã€‘
æ¯ä¸ªå‘ç°å¿…é¡»åŒ…å«ï¼š
1. **ç»“è®º**ï¼ˆ1-2å¥ï¼‰
2. **åŸæ–‡æ‘˜å½•**ï¼ˆâ‰¥3æ¡ï¼Œå«æ¥æºé“¾æ¥ï¼‰
3. **åˆ†æ**ï¼ˆä½ çš„è§£è¯»ï¼‰

## è¾“å‡ºæ–¹å¼ã€å¼ºåˆ¶ã€‘
1. å®Œæ•´å†…å®¹å†™å…¥ $WORK_DIR/outputs/subtask_XXX.md
2. åªè¿”å›ç®€çŸ­çŠ¶æ€ï¼ˆâ‰¤200å­—ï¼‰
```

### ğŸ“¦ å¤„ç†å‹å­ä»»åŠ¡

```markdown
# å­ä»»åŠ¡: [ä»»åŠ¡å]

## ç›®æ ‡
å¤„ç† [æ•°æ®æº] ä¸­çš„ [å…·ä½“å†…å®¹]

## è¾“å…¥
[å…·ä½“URLæˆ–æ–‡ä»¶è·¯å¾„]

## è¾“å‡ºæ ¼å¼ã€å¼ºåˆ¶ã€‘
- æ•°æ®å®Œæ•´æ€§æŠ¥å‘Šï¼šæˆåŠŸ X æ¡ï¼Œå¤±è´¥ Y æ¡ï¼Œå®Œæ•´ç‡ Z%
- å¤±è´¥é¡¹è¯¦ç»†åˆ—è¡¨

## è¾“å‡ºæ–¹å¼ã€å¼ºåˆ¶ã€‘
1. å®Œæ•´å†…å®¹å†™å…¥ $WORK_DIR/outputs/subtask_XXX.md
2. åªè¿”å›ç®€çŸ­çŠ¶æ€ï¼ˆâ‰¤200å­—ï¼‰
```

---

## Tavily å‚æ•°è§„èŒƒ

```javascript
{
  search_depth: "advanced",  // å¿…é¡»ä½¿ç”¨ advanced
  max_results: 10,           // é¦–è½® 10ï¼Œåç»­å¯è°ƒæ•´
  include_domains: [],       // æŒ‰éœ€æŒ‡å®š
  exclude_domains: []        // æ’é™¤ä½è´¨é‡æº
}
```

---

## ğŸ”´ äº¤ä»˜å‰è‡ªå®¡æ£€æŸ¥ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**æ‰§è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼ˆå¿…é¡»å…¨éƒ¨ âœ…ï¼‰**ï¼š
```bash
cd $WORK_DIR && \
  echo "=== 3å¼ºåˆ¶æ–‡ä»¶ï¼ˆæ ¹ç›®å½•ï¼‰===" && \
  [ -f aggregated_raw.md ] && echo "âœ… aggregated_raw.md" || echo "âŒ aggregated_raw.md" && \
  [ -f final_report.md ] && echo "âœ… final_report.md" || echo "âŒ final_report.md" && \
  [ -f evidence_summary.md ] && echo "âœ… evidence_summary.md" || echo "âŒ evidence_summary.md" && \
  [ -f logs/checkpoint.json ] && echo "âœ… checkpoint.json" || echo "âŒ checkpoint.json"
```

**â›” æœ‰ä»»ä½• âŒ = è¿”å›ä¿®å¤ï¼Œç¦æ­¢äº¤ä»˜**

---

## è¯¦ç»†æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | å†…å®¹ |
|-----|------|
| **PHASES.md** | å„é˜¶æ®µè¯¦ç»†æ‰§è¡Œæ­¥éª¤ã€checkpoint æ›´æ–°ä»£ç  |
| **PROMPTS.md** | å®Œæ•´ prompt æ¨¡æ¿ã€è¯æ®é“¾æ ¼å¼ |
| **RULES.md** | å¼ºåˆ¶è§„åˆ™è¯¦ç»†è¯´æ˜ |
| **VERIFICATION.md** | Phase 5.5 è‡ªå®¡æµç¨‹ |
| **PHASE4_AGGREGATION.md** | Report-Generator å­ä»£ç†å®Œæ•´æŒ‡å— |
| **OUTPUT_SPEC.md** | è¾“å‡ºæ ¼å¼è§„èŒƒ |
| **BEST_PRACTICES.md** | æœ€ä½³å®è·µ |

---

## è§¦å‘è¯

- "Wide Research"
- "wide research"
- "å¹¿åŸŸè°ƒç ”"
- "å¹¶è¡Œç ”ç©¶"
- "å¤šAgentè°ƒç ”"
- "ç³»ç»Ÿæ€§è°ƒç ”"
